Конечно! Давайте создадим подробную документацию для вашего Modding API, чтобы помочь разработчикам модов использовать все доступные функции и события.

# **Modding API для MyCraft III**

Modding API для MyCraft III позволяет разработчикам модификаций расширять функциональность игры с помощью Lua-скриптов. В этом документе описаны все доступные функции и события, которые вы можете использовать в своих модах.

## **Начало работы**

Чтобы создать мод для MyCraft III, вам нужно создать Lua-скрипт с определенными функциями и использовать предоставленные API-функции для взаимодействия с игрой.

---

## **Содержание**

1. [Глобальные функции](#Глобальные-функции)
   - [setBlk(x, y, z, blockID)](#setBlk)
   - [removeBlk(x, y, z)](#removeBlk)
   - [spwnEntity(x, y, z)](#spwnEntity)
   - [playSound(sound_path)](#playSound)
   - [createUi(ui_type, position, scale, params)](#createUi)
   - [addBlock(block_id, texture_path)](#addBlock)
   - [getPlayerX()](#getPlayerX)
   - [getPlayerY()](#getPlayerY)
   - [getPlayerZ()](#getPlayerZ)
   - [setPlayerX(x)](#setPlayerX)
   - [setPlayerY(y)](#setPlayerY)
   - [setPlayerZ(z)](#setPlayerZ)
   - [getBlockAt(x, y, z)](#getBlockAt)
   - [typeToID(block_type)](#typeToID)
   - [addMusic(music_path)](#addMusic)
2. [События](#События)
   - [function onStart()](#onStart)
   - [function onUpdate()](#onUpdate)
   - [function onKey(key)](#onKey)
3. [Примеры использования](#Примеры-использования)
4. [Замечания](#Замечания)

---

## **Глобальные функции**

### <a name="setBlk"></a>**setBlk(x, y, z, blockID)**

**Описание:**
Устанавливает блок указанного типа по заданным координатам.

**Параметры:**
- `x` (`number`): координата X.
- `y` (`number`): координата Y.
- `z` (`number`): координата Z.
- `blockID` (`number`): идентификатор типа блока.

**Пример:**
```lua
setBlk(10, 64, 10, 2) -- Установит блок с ID 2 по координатам (10, 64, 10)
```

---

### <a name="removeBlk"></a>**removeBlk(x, y, z)**

**Описание:**
Удаляет блок по заданным координатам.

**Параметры:**
- `x` (`number`): координата X.
- `y` (`number`): координата Y.
- `z` (`number`): координата Z.

**Пример:**
```lua
removeBlk(10, 64, 10) -- Удалит блок по координатам (10, 64, 10)
```

---

### <a name="spwnEntity"></a>**spwnEntity(x, y, z)**

**Описание:**
Создает сущность (например, моба или NPC) по заданным координатам.

**Параметры:**
- `x` (`number`): координата X.
- `y` (`number`): координата Y.
- `z` (`number`): координата Z.

**Пример:**
```lua
spwnEntity(15, 65, 15) -- Создаст сущность по координатам (15, 65, 15)
```

---

### <a name="playSound"></a>**playSound(sound_path)**

**Описание:**
Воспроизводит звук из указанного файла.

**Параметры:**
- `sound_path` (`string`): путь к звуковому файлу.

**Пример:**
```lua
playSound('res/sounds/explosion.wav') -- Воспроизведет звук взрыва
```

---

### <a name="createUi"></a>**createUi(ui_type, position, scale, params)**

**Описание:**
Создает элемент пользовательского интерфейса (UI) указанного типа.

**Параметры:**
- `ui_type` (`number`): тип элемента UI.
  - `1` – текстурированная кнопка (`texture_button`).
  - `2` – текст (`create_text`).
  - `3` – изображение (`add_image`).
- `position` (`table`): позиция элемента UI с ключами `x`, `y`, `z`.
- `scale` (`table`): масштаб элемента UI с ключами `x`, `y`.
- `params` (`table`): дополнительные параметры, зависящие от типа элемента.

**Пример:**
```lua
-- Создать кнопку с текстом "Начать игру"
createUi(1, {x=0, y=0}, {x=0.2, y=0.1}, {text='Начать игру', on_click='startGame'})
```

---

### <a name="addBlock"></a>**addBlock(block_id, texture_path)**

**Описание:**
Добавляет новый тип блока в игру.

**Параметры:**
- `block_id` (`number`): идентификатор нового блока.
- `texture_path` (`string`): путь к текстуре блока.

**Пример:**
```lua
addBlock(6, 'res/textures/my_custom_block.png') -- Добавит новый блок с ID 6
```

---

### <a name="getPlayerX"></a>**getPlayerX()**

**Описание:**
Возвращает текущую координату X игрока.

**Возвращаемое значение:**
- `number`: координата X игрока.

**Пример:**
```lua
local playerX = getPlayerX()
print("Позиция игрока X:", playerX)
```

---

### <a name="getPlayerY"></a>**getPlayerY()**

**Описание:**
Возвращает текущую координату Y игрока.

**Возвращаемое значение:**
- `number`: координата Y игрока.

**Пример:**
```lua
local playerY = getPlayerY()
print("Позиция игрока Y:", playerY)
```

---

### <a name="getPlayerZ"></a>**getPlayerZ()**

**Описание:**
Возвращает текущую координату Z игрока.

**Возвращаемое значение:**
- `number`: координата Z игрока.

**Пример:**
```lua
local playerZ = getPlayerZ()
print("Позиция игрока Z:", playerZ)
```

---

### <a name="setPlayerX"></a>**setPlayerX(x)**

**Описание:**
Устанавливает координату X игрока.

**Параметры:**
- `x` (`number`): новая координата X игрока.

**Пример:**
```lua
setPlayerX(100) -- Переместит игрока на координату X = 100
```

---

### <a name="setPlayerY"></a>**setPlayerY(y)**

**Описание:**
Устанавливает координату Y игрока.

**Параметры:**
- `y` (`number`): новая координата Y игрока.

**Пример:**
```lua
setPlayerY(70) -- Переместит игрока на координату Y = 70
```

---

### <a name="setPlayerZ"></a>**setPlayerZ(z)**

**Описание:**
Устанавливает координату Z игрока.

**Параметры:**
- `z` (`number`): новая координата Z игрока.

**Пример:**
```lua
setPlayerZ(200) -- Переместит игрока на координату Z = 200
```

---

### <a name="getBlockAt"></a>**getBlockAt(x, y, z)**

**Описание:**
Возвращает тип блока по указанным координатам.

**Параметры:**
- `x` (`number`): координата X.
- `y` (`number`): координата Y.
- `z` (`number`): координата Z.

**Возвращаемое значение:**
- `string`: тип блока (например, `'grass'`, `'stone'`) или `'air'`, если блока нет.

**Пример:**
```lua
local blockType = getBlockAt(10, 64, 10)
print("Тип блока:", blockType)
```

---

### <a name="typeToID"></a>**typeToID(block_type)**

**Описание:**
Возвращает идентификатор блока по его типу.

**Параметры:**
- `block_type` (`string`): тип блока (например, `'grass'`, `'stone'`).

**Возвращаемое значение:**
- `number`: идентификатор блока или `-1`, если тип не найден.

**Пример:**
```lua
local blockID = typeToID('stone')
print("ID блока 'stone':", blockID)
```

---

### <a name="addMusic"></a>**addMusic(music_path)**

**Описание:**
Добавляет музыкальный файл в список случайного воспроизведения.

**Параметры:**
- `music_path` (`string`): путь к музыкальному файлу.

**Пример:**
```lua
addMusic('res/music/my_custom_track.ogg') -- Добавит трек в список музыки
```

---

## **События**

### <a name="onStart"></a>**function onStart()**

**Описание:**
Функция, которая вызывается при запуске мода. Здесь можно разместить код инициализации.

**Пример:**
```lua
function onStart()
    print("Мой мод запущен!")
    -- Дополнительный код инициализации
end
```

---

### <a name="onUpdate"></a>**function onUpdate()**

**Описание:**
Функция, которая вызывается каждый кадр. Здесь можно разместить код, который должен выполняться постоянно.

**Пример:**
```lua
function onUpdate()
    -- Код, который выполняется каждый кадр
    local x = getPlayerX()
    if x > 100 then
        print("Вы достигли координаты X = 100!")
    end
end
```

---

### <a name="onKey"></a>**function onKey(key)**

**Описание:**
Функция, которая вызывается при нажатии клавиши.

**Параметры:**
- `key` (`string`): название нажатой клавиши.

**Пример:**
```lua
function onKey(key)
    if key == 'space' then
        print("Вы нажали пробел!")
        -- Дополнительные действия при нажатии пробела
    end
end
```

---

## **Примеры использования**

### **Пример простого мода**

```lua
-- mod.lua

function onStart()
    print("Добро пожаловать в мой мод!")
    -- Создаем блок из дерева под игроком
    local x = getPlayerX()
    local y = getPlayerY() - 1
    local z = getPlayerZ()
    setBlk(x, y, z, typeToID('wood'))
end

function onUpdate()
    -- Постоянно проверяем, находится ли игрок на высоте ниже 50
    local y = getPlayerY()
    if y < 50 then
        print("Вы слишком низко!")
        setPlayerY(70) -- Перемещаем игрока наверх
    end
end

function onKey(key)
    if key == 'm' then
        playSound('res/sounds/magic.wav')
        print("Вы нажали клавишу 'M'!")
    end
end
```

---

## **Замечания**

- **Обработка ошибок:**
  - Убедитесь, что в ваших Lua-скриптах нет синтаксических ошибок. Ошибка в скрипте может привести к тому, что мод не загрузится.
  - Используйте `print` для вывода сообщений в консоль для отладки.

- **Пути к файлам:**
  - Все пути к файлам должны быть относительно корневой директории игры.
  - Убедитесь, что файлы (например, текстуры, звуки) существуют по указанным путям.

- **Список блоков:**
  - Стандартные типы блоков включают: `'grass'`, `'stone'`, `'wood'`, `'leaves'`, `'planks'`.
  - Вы можете добавить собственные блоки с помощью функции `addBlock`.

- **Клавиши:**
  - Названия клавиш соответствуют названиям в движке Ursina. Примеры: `'space'`, `'enter'`, `'g'`, `'left mouse down'`.
  - Полный список доступных клавиш можно найти в документации Ursina.

- **Производительность:**
  - Будьте осторожны при использовании ресурсоемких операций в функции `onUpdate`, чтобы не замедлить игру.
  - По возможности оптимизируйте ваш код.

- **Безопасность:**
  - Избегайте выполнения небезопасного кода или кода, который может повредить данные игры или системы пользователя.

---

## **Заключение**

Данный Modding API предоставляет широкий набор функций для взаимодействия с миром игры, игроком, сущностями и пользовательским интерфейсом. Используя эти функции и события, вы можете создавать разнообразные модификации, обогащающие игровой процесс MyCraft III.

Если у вас есть вопросы или предложения по улучшению API, пожалуйста, свяжитесь с разработчиками игры.

Удачного моддинга!
